language: node_js
node_js:
  - 'node'
  - '7'
  - '6'

matrix:
  fast_finish: true
  allow_failures:
    - node_js: 'node'

notifications:
  email:
    on_success: never
    on_failure: change
  slack:
    template:
      - "%{repository_slug}@%{branch} (%{commit}): %{result} in %{duration}"
      - "%{build_url}"
    rooms:
      secure: U1N3HSvSElBQMO1XMgvVO4r52eDHtajsGxleXbscgd2GTrKyUlJBekywoE/l+OSm2UsleYcn9ZuJHnuExGRHWDj+srptPHgWBvmKFeZr+1Z5oqu7h+/OIDi+MxaC12svXAPAwKiTjHIxdZfZRs3b5GD+t2GdNAy2ymw276O6cAonSaANSpq1RiEJAgaaQQoOx7UcP/RTFCKs4fsTWTiGPtE8Y1RBWfLQVH3Rwg0GB+KeR8/KKBUSikbSR8hlAow3C4vGAQuayJkNAwjKI1bZZEFkKQPqmGreuUhkuGCZLBPJh25lrH5OsDA/kvBaHlX/RkxVSA5mruodCFtWNTLKulzT4VyzXUH5+L3I+w6iXUpTE2878gIsP7rizRLeypREY/z69Qn9QiKYnSLCfPo2Ve8KB8bWsEOLXX8bXq6nRP3C7in0LXF2Qrxs/4Na1yVQM4eWzm8fK6sKDbpG0LTUADtBQr9Bq8Y7+aIczHkcsXr6Jg7iBiJoUfpwOSrvg4taD28/5Sdh+G9RXWQon8zzLBfj4PtAuLdfzmwYGaZe8KSTHy/c8f2QzKg3sf5cTzBEyTSA/TATFfyPsSDtI5YvEvSOuH3zT8r6grMKtt//CqumqJKvZQavOVOA7uHOpm+4/LBZd0q3ZVFs5B+SW+8R9fI8duRea7Y8s8zQvn69rmw=
    on_success: change
    on_failure: always

env:
  global:
    secure: tGkAQrHDlpQxvtNJ/yx4xiKZ3am1JylaVzVJ1mRI0QFK0GbaFLA8VDnlq+98RhBJB4FhjZASckL9aCrJnqjmv4/lVVnkgSGSpAC8+Cus71YnveVlL4MuRcFpBRdcj+Ftor23jHzhTwFMrd4geo1+0Ax9rw4dZxotHDWsKWVzeIqoz4Rw07yX0JXQlwlxuVrkMBn2fC25q/Yr+X53aTskxB6fWE4scEfO1DubDvSLfm6VjDMjdBoexJ5wHIyzApeq3x0/CtK98HtjUBvy7U2QIj1xCv6XRKbRxK3WWfvHN1WP1aHYVOETroqANZoJVdhiOdGxSsKRP/mPucbrcvJYSshVVpYJTTHMTsKtvlbrYzUil4rtnIEWO6mqsluzfT7N/HOX7JSbx+vGDoSId1n204lEOuyvXHLhZrj2e2+SAmsB3ti3jtaqsxXjMaFyST7HlhVT1mdtyp8zSo+XY2erBy4turwduyKMMrWYgRjcvJFGs0kN7ikGiax0k9+FBDAz+Y1W3Si3sr+BqXhtjRCJhfLOPPd7V1oi1vgpyFTzmiQr4UYwTfpe3JU1PuoWr9FmRugE82shhQp2ZRkVodnTMiPg4VsUUq3KC5lKigWoOISzTjFjD/uTDrpaEBU3WnY/1TUzvyAX4fgVsRkTCaddak5pJZbQIWW1xkfBdLgp5Nw=

cache:
  directories:
    - node_modules

install: 'npm install'
before_script: 'snyk auth $SNYK_TOKEN'
script: 'npm test'
